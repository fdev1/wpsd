<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>WPS SDK -- Software Developer&#39;s Kit: Location Settings</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">


<h1><a class="anchor" id="locationsettings">Location Settings </a></h1><p>Starting from version <a class="el" href="changelog.html">4.9.2</a> WPS API will respect the system-wide location permission setting (applies only to <a class="el" href="locationsettings.html#windows">Windows 8</a> and <a class="el" href="locationsettings.html#darwin">OS X 10.7</a> onwards). If location services are disabled, WPS API will return <a class="el" href="wpsapi_8h.html#a58fefac6c3603b454c51251e6eab7302">WPS_ERROR_LOCATION_SETTING_DISABLED</a> in <a class="el" href="wpsapi_8h.html#ad9502fdf84e836835e13d02f63004a43">WPS_location</a>, <a class="el" href="wpsapi_8h.html#a291e75e9d48e6be7e2da466c49fbfbf6">WPS_periodic_location</a>, <a class="el" href="wpsapi_8h.html#a0b4a25c7abf2548afb1087b54ad1cdc7">WPS_certified_location</a> and <a class="el" href="wpsapi_8h.html#a7a012be8815ca061549ba21799aee702">WPS_tune_location</a> calls.</p>
<p>See more information on your platform below.</p>
<h2><a class="anchor" id="windows">
Windows 8 or later (Desktop Mode)</a></h2>
<p>The system-wide location setting on Windows can be found in <em>Control Panel - Location Settings</em>. It is enabled by default. Check out <b>Administrator settings</b> section <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/hh768219.aspx">here</a>.</p>
<p>If you receive <a class="el" href="wpsapi_8h.html#a58fefac6c3603b454c51251e6eab7302">WPS_ERROR_LOCATION_SETTING_DISABLED</a> from WPS API in your application, that means the option <em>Turn on the Windows Location platform</em> is unchecked by the user.</p>
<p>You might want to handle this by notifying the user that the location platform is currently disabled in the system and hence the application will not be able to determine location. You can also navigate the user to the <em>Location Settings</em> page directly so the user may re-enable the location setting back.</p>
<p>Below is a sample code snippet: </p>
<div class="fragment"><pre class="fragment"><span class="keywordflow">if</span> (MessageBox(NULL,
               L<span class="stringliteral">&quot;Location is disabled in system. Do you want to open Control Panel to enable it?&quot;</span>,
               L<span class="stringliteral">&quot;My Application&quot;</span>,
               MB_YESNO | MB_ICONQUESTION) == IDYES)
{
    ShellExecute(NULL, NULL, L<span class="stringliteral">&quot;control&quot;</span>, L<span class="stringliteral">&quot;-name Microsoft.LocationSettings&quot;</span>, NULL, SW_SHOW);
}
</pre></div><p>You can check <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/cc144191(v=vs.85).aspx">here</a> on more ways to pop up Control Panel items programmatically.</p>
<dl class="note"><dt><b>Note:</b></dt><dd>Windows 8 may show a prompt to enable location services the very first time when location is requested via Location API (check the <b>Dialogues for enabling location</b> section <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/hh768219.aspx">here</a>). WPS API will never cause the system to show any kind of prompts.</dd></dl>
<h2><a class="anchor" id="darwin">
OS X 10.7 or later</a></h2>
<p>OS X stores location settings under <em>System Preferences - Security &amp; Privacy - Privacy - Location Services</em>. In addition to the global setting (<em>Enable Location Services</em>) it also lists applications permitted to determine location. WPS API will not require the application to be listed and will grant permission whenever just the global setting is enabled.</p>
<p>If you receive <a class="el" href="wpsapi_8h.html#a58fefac6c3603b454c51251e6eab7302">WPS_ERROR_LOCATION_SETTING_DISABLED</a> from WPS API, that means that the global setting is disabled by the user. You might want to handle this by notifying the user that the location services are currently disabled in the system and hence the application will not be able to determine location. You can also navigate the user to the location settings page directly so the user may re-enable the location services back.</p>
<p>Below is a sample Apple script: </p>
<div class="fragment"><pre class="fragment">tell application <span class="stringliteral">&quot;System Preferences&quot;</span>
    <span class="keyword">set</span> securityPane to pane <span class="keywordtype">id</span> <span class="stringliteral">&quot;com.apple.preference.security&quot;</span>
    tell securityPane to reveal anchor <span class="stringliteral">&quot;Privacy_LocationServices&quot;</span>
    activate
end tell
</pre></div><p>You can save it to a file (e.g. <code>locationsettings.scpt</code>) and run: </p>
<div class="fragment"><pre class="fragment">osascript locationsettings.scpt
</pre></div><p>If you want to implement it in Objective C, refer to the <a href="https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/ScriptingBridgeConcepts/UsingScriptingBridge/UsingScriptingBridge.html">Scripting Bridge documentation</a>.</p>
<dl class="note"><dt><b>Note:</b></dt><dd>OS X will show a prompt to grant location permission to the application the first time it attempts to determine location (see <a href="https://developer.apple.com/library/mac/documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html">CLLocationManager API documentation</a>). WPS API will never cause the system to show any kind of prompts. </dd></dl>
</div>
<hr size="1">
<table width="100%">
    <tr>
        <td align="left" valign="top">
            WPS SDK -- Software Developer's Kit Documentation
        </td>
        <td align="right" rowspan="2">
            <a href="http://www.skyhookwireless.com"><img src="http://www.skyhookwireless.com/images/logo_hdr.jpg" height="79" width="180" border="0" alt="Skyhook"/></a>
        </td>
    </tr>
    <tr>
        <td align="left" valign="bottom">
            <small>
                &copy; 2005-present <a href="http://www.skyhookwireless.com">Skyhook</a>
            </small>
        </td>
    </tr>
</table>
<!-- <address style="align: right;"><small>Generated on Tue Sep 1 22:32:16 2015 for WPS SDK -- Software Developer's Kit by&nbsp;<a href="http://www.doxygen.org/index.html"><img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.6.3</small></address> -->
</body>
</html>
